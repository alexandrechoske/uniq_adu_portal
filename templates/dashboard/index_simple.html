{% extends "base.html" %}

{% block title %}Dashboard Executivo - Portal UniSystem{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard-simple.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header -->
    <div class="dashboard-header">
        <div>
            <h1 class="dashboard-title">Dashboard Executivo</h1>
            <p class="dashboard-subtitle">Vis√£o geral das opera√ß√µes de importa√ß√£o</p>
        </div>
        <div>
            <span id="last-update">Carregando...</span>
        </div>
    </div>
    
    <!-- KPI Cards -->
    <div class="kpi-section">
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-total-processos">-</div>
            <div class="kpi-label">Total de Processos</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-total-despesas">-</div>
            <div class="kpi-label">Total Despesas (R$)</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-modal-aereo">-</div>
            <div class="kpi-label">Modal A√©reo</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-modal-maritimo">-</div>
            <div class="kpi-label">Modal Mar√≠timo</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-em-transito">-</div>
            <div class="kpi-label">Em Tr√¢nsito</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-di-registrada">-</div>
            <div class="kpi-label">DI Registrada</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-despesa-media">-</div>
            <div class="kpi-label">Despesa M√©dia</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-mes-atual">-</div>
            <div class="kpi-label">Despesas M√™s Atual</div>
        </div>
    </div>
    
    <!-- Charts Grid -->
    <div class="charts-grid-main">
        <!-- Monthly Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">Evolu√ß√£o Mensal de Opera√ß√µes</h2>
                <div>
                    <button id="refresh-chart" class="btn btn-secondary">üîÑ Atualizar</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="monthly-chart" class="chart-canvas"></canvas>
            </div>
        </div>
        
        <!-- Canal Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">Distribui√ß√£o por Canal DI</h2>
            </div>
            <div class="chart-container">
                <canvas id="canal-chart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>
    
    <!-- Second Row of Charts -->
    <div class="charts-grid-secondary">
        <!-- Armaz√©m Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">Top Armaz√©ns por Volume</h2>
            </div>
            <div class="chart-container">
                <canvas id="armazem-chart" class="chart-canvas"></canvas>
            </div>
        </div>
        
        <!-- Material Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">Top Materiais por Valor</h2>
            </div>
            <div class="chart-container">
                <canvas id="material-chart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>
    
    <!-- Data Table -->
    <div class="table-container">
        <div class="table-header">
            <h2 class="table-title">√öltimas Opera√ß√µes</h2>
            <div class="table-controls">
                <button id="refresh-table" class="btn btn-secondary">üîÑ Atualizar Tabela</button>
            </div>
        </div>
        <div id="table-container">
            <div class="loading">
                <div class="spinner"></div>
                Carregando dados da tabela...
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<!-- Dashboard JavaScript -->
<script src="{{ url_for('static', filename='js/dashboard-simple.js') }}"></script>
{% endblock %}
