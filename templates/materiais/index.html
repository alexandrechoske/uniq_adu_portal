{% extends "base.html" %}

{% block title %}AnÃ¡lise de Materiais - Portal UniSystem{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/materiais-simple.css') }}">
{% endblock %}

{% block content %}
<div class="materiais-container">
    <!-- Header -->
    <div class="materiais-header">
        <div>
            <h1 class="materiais-title">AnÃ¡lise de Materiais</h1>
            <p class="materiais-subtitle">VisÃ£o detalhada dos materiais importados</p>
        </div>
        <div>
            <span id="last-update">Carregando...</span>
        </div>
    </div>
    
    <!-- Filtros -->
    <div class="filters-section">
        <div class="filters-card">
            <div class="filters-header">
                <h3>ğŸ” Filtros</h3>
                <button id="clear-filters" class="btn btn-outline">Limpar</button>
            </div>
            <div class="filters-content">
                <!-- Filtros de Busca -->
                <div class="filter-section">
                    <h4 class="filter-section-title">ğŸ” Filtros de Busca</h4>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="material-filter">Material:</label>
                            <select id="material-filter" name="material" class="filter-select">
                                <option value="">Todos os materiais</option>
                                <!-- OpÃ§Ãµes carregadas dinamicamente -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="cliente-filter">Cliente:</label>
                            <select id="cliente-filter" name="cliente" class="filter-select">
                                <option value="">Todos os clientes</option>
                                <!-- OpÃ§Ãµes carregadas dinamicamente -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="modal-filter">Modal:</label>
                            <select id="modal-filter" name="modal" class="filter-select">
                                <option value="">Todos os modais</option>
                                <option value="AÃ‰REA">AÃ©reo</option>
                                <option value="MARÃTIMA">MarÃ­timo</option>
                                <option value="RODOVIÃRIA">Terrestre</option>
                                <option value="N/I">N/I</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Filtros Temporais -->
                <div class="filter-section">
                    <h4 class="filter-section-title">ğŸ“… Filtros Temporais</h4>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="data-inicio">Data InÃ­cio:</label>
                            <input type="date" id="data-inicio" name="data_inicio" class="filter-input">
                        </div>
                        <div class="filter-group">
                            <label for="data-fim">Data Fim:</label>
                            <input type="date" id="data-fim" name="data_fim" class="filter-input">
                        </div>
                    </div>
                    
                    <!-- Filtros RÃ¡pidos -->
                    <div class="quick-filters">
                        <span class="quick-filters-label">Filtros rÃ¡pidos:</span>
                        <button type="button" class="btn btn-quick" data-period="current-year">Ano Atual</button>
                        <button type="button" class="btn btn-quick" data-period="this-week">Esta Semana</button>
                        <button type="button" class="btn btn-quick" data-period="this-month">Este MÃªs</button>
                        <button type="button" class="btn btn-quick" data-period="3-months">3 Meses</button>
                        <button type="button" class="btn btn-quick" data-period="6-months">6 Meses</button>
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button id="apply-filters" class="btn btn-primary">ğŸ” Aplicar Filtros</button>
                    <span id="filter-status" class="filter-status"></span>
                </div>
                
                <!-- Resumo dos Filtros Ativos -->
                <div id="active-filters-summary" class="active-filters-summary" style="display: none;">
                    <div class="summary-header">
                        <span class="summary-title">ğŸ“‹ Filtros Ativos:</span>
                        <button id="clear-active-filters" class="btn btn-sm btn-outline">âœ• Limpar</button>
                    </div>
                    <div id="active-filters-content" class="summary-content"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- KPI Cards -->
    <div class="kpi-section">
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-processos">-</div>
            <div class="kpi-label">Total de Processos</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-materiais">-</div>
            <div class="kpi-label">Materiais Ãšnicos</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-valor">-</div>
            <div class="kpi-label">Valor Total (VMCV)</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-custo">-</div>
            <div class="kpi-label">Custo Total</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-ticket">-</div>
            <div class="kpi-label">Ticket MÃ©dio</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-value" id="kpi-transit">-</div>
            <div class="kpi-label">Transit Time MÃ©dio</div>
        </div>
    </div>
    
    <!-- Em desenvolvimento -->
    <div class="development-section">
        <div class="alert alert-info">
            <h4>ğŸ“Š Dashboard em Desenvolvimento</h4>
            <p>Os KPIs acima estÃ£o funcionais. PrÃ³ximas funcionalidades:</p>
            <ul>
                <li>âœ… KPIs bÃ¡sicos de materiais</li>
                <li>ğŸ”„ GrÃ¡fico de top materiais por valor</li>
                <li>ğŸ”„ EvoluÃ§Ã£o temporal de materiais</li>
                <li>ğŸ”„ AnÃ¡lise por modal de transporte</li>
                <li>ğŸ”„ Tabela detalhada de materiais</li>
                <li>ğŸ”„ Filtros avanÃ§ados</li>
            </ul>
            <div class="mt-3">
                <button id="refresh-data" class="btn btn-primary">ğŸ”„ Atualizar KPIs</button>
                <button id="load-from-cache" class="btn btn-secondary">ğŸ’¾ Carregar do Cache</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Materiais JavaScript -->
<script src="{{ url_for('static', filename='js/materiais-simple.js') }}"></script>
{% endblock %}
