<!-- Modal de Detalhes do Processo - Compartilhado -->
<div id="process-modal" class="modal-overlay">
    <div class="modal-container">
        <!-- Modal Header -->
        <div class="modal-header">
            <h2 class="modal-title" id="modal-title">Detalhes do Processo</h2>
            <button class="modal-close" id="modal-close">
                <i class="mdi mdi-close"></i>
            </button>
        </div>

        <!-- Modal Content -->
        <div class="modal-content">
            <!-- Timeline do Processo -->
            <div class="process-timeline">
                <div class="timeline-step" data-step="1">
                    <div class="timeline-icon">
                        <i class="mdi mdi-file-document-outline"></i>
                    </div>
                    <div class="timeline-label">Abertura</div>
                </div>
                <div class="timeline-step" data-step="2">
                    <div class="timeline-icon">
                        <i class="mdi mdi-truck"></i>
                    </div>
                    <div class="timeline-label">Embarque</div>
                </div>
                <div class="timeline-step" data-step="3">
                    <div class="timeline-icon">
                        <i class="mdi mdi-airplane-landing"></i>
                    </div>
                    <div class="timeline-label">Chegada</div>
                </div>
                <div class="timeline-step" data-step="4">
                    <div class="timeline-icon">
                        <i class="mdi mdi-check-circle-outline"></i>
                    </div>
                    <div class="timeline-label">Desembaraço</div>
                </div>
                <div class="timeline-step" data-step="5">
                    <div class="timeline-icon">
                        <i class="mdi mdi-flag-checkered"></i>
                    </div>
                    <div class="timeline-label">Finalizado</div>
                </div>
            </div>

            <!-- Cards de Informações -->
            <div class="modal-cards">
                <!-- Card 1: Informações Gerais -->
                <div class="info-card">
                    <h3 class="card-title">Informações Gerais</h3>
                    <div class="card-grid-2">
                        <div class="info-item">
                            <label>Ref. Unique:</label>
                            <span id="detail-ref-unique">-</span>
                        </div>
                        <div class="info-item">
                            <label>Ref. Importador:</label>
                            <span id="detail-ref-importador">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data de Abertura:</label>
                            <span id="detail-data-abertura">-</span>
                        </div>
                        <div class="info-item">
                            <label>Importador:</label>
                            <span id="detail-importador">-</span>
                        </div>
                        <div class="info-item">
                            <label>CNPJ:</label>
                            <span id="detail-cnpj">-</span>
                        </div>
                        <div class="info-item">
                            <label>Status Atual:</label>
                            <span id="detail-status" class="status-badge">-</span>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Detalhes da Carga e Transporte -->
                <div class="info-card">
                    <h3 class="card-title">Detalhes da Carga e Transporte</h3>
                    <div class="card-grid-3">
                        <div class="info-item">
                            <label>Modal:</label>
                            <span id="detail-modal">-</span>
                        </div>
                        <div class="info-item">
                            <label>Container:</label>
                            <span id="detail-container">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data de Embarque:</label>
                            <span id="detail-data-embarque">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data de Chegada:</label>
                            <span id="detail-data-chegada">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data de Fechamento:</label>
                            <span id="detail-data-fechamento">-</span>
                        </div>
                        <div class="info-item">
                            <label>Transit Time (dias):</label>
                            <span id="detail-transit-time">-</span>
                        </div>
                        <div class="info-item">
                            <label>Peso Bruto (Kg):</label>
                            <span id="detail-peso-bruto">-</span>
                        </div>
                    </div>
                </div>

                <!-- Card 3: Informações Aduaneiras -->
                <div class="info-card">
                    <h3 class="card-title">Informações Aduaneiras</h3>
                    <div class="card-grid-3">
                        <div class="info-item">
                            <label>Número da DI:</label>
                            <span id="detail-numero-di">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data de Registro DI:</label>
                            <span id="detail-data-registro">-</span>
                        </div>
                        <div class="info-item">
                            <label>Canal:</label>
                            <span id="detail-canal">-</span>
                        </div>
                        <div class="info-item">
                            <label>Data do Desembaraço:</label>
                            <span id="detail-data-desembaraco">-</span>
                        </div>
                        <div class="info-item">
                            <label>URF de Despacho:</label>
                            <span id="detail-urf-despacho">-</span>
                        </div>
                    </div>
                </div>

                <!-- Card 4: Resumo Financeiro -->
                <div class="info-card">
                    <h3 class="card-title">Resumo Financeiro</h3>
                    <div class="card-grid-2">
                        <div class="info-item">
                            <label>Valor CIF (R$):</label>
                            <span id="detail-valor-cif">-</span>
                        </div>
                        <div class="info-item">
                            <label>Frete Internacional (R$):</label>
                            <span id="detail-frete-inter">-</span>
                        </div>
                        <div class="info-item">
                            <label>Armazenagem (R$):</label>
                            <span id="detail-armazenagem">-</span>
                        </div>
                        <div class="info-item">
                            <label>Honorários (R$):</label>
                            <span id="detail-honorarios">-</span>
                        </div>
                        <div class="info-item">
                            <label>Outras Despesas (R$):</label>
                            <span id="detail-outras-despesas">-</span>
                        </div>
                        <div class="info-item total-item">
                            <label>Custo Total (R$):</label>
                            <span id="detail-custo-total" class="total-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Card 5: Documentos Anexados -->
                <div class="info-card">
                    <div class="card-header-with-action">
                        <h3 class="card-title">Documentos Anexados</h3>
                        <!-- Seção de upload (visível apenas para admin/interno) -->
                        <div id="upload-section" style="display: none;">
                            <button id="upload-document-btn" class="btn-upload">
                                <i class="mdi mdi-plus"></i>
                                Anexar Documento
                            </button>
                        </div>
                    </div>
                    <div class="documents-list" id="documents-list">
                        <div class="no-documents">
                            <i class="mdi mdi-file-document-outline"></i>
                            <p>Carregando documentos...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Upload de Documento -->
<div id="document-upload-modal" class="modal-overlay">
    <div class="modal-container document-upload-container">
        <div class="modal-header">
            <h2 class="modal-title">Anexar Documento</h2>
            <button class="modal-close" id="close-upload-modal">
                <i class="mdi mdi-close"></i>
            </button>
        </div>
        
        <div class="modal-content">
            <form id="document-upload-form" enctype="multipart/form-data">
                <div class="upload-form-grid">
                    <!-- File Input -->
                    <div class="form-group full-width">
                        <label for="document-file" class="form-label">Arquivo *</label>
                        <div class="file-input-container">
                            <input type="file" id="document-file" name="file" accept=".pdf,.jpg,.jpeg,.png,.gif,.webp,.xlsx,.xls,.docx,.doc,.txt,.csv,.zip" required>
                            <label for="document-file" class="file-input-label">
                                <i class="mdi mdi-cloud-upload"></i>
                                <span>Clique aqui ou arraste o arquivo</span>
                                <small>Máx. 50MB - PDF, Imagem, Office, TXT, CSV, ZIP</small>
                            </label>
                        </div>
                        <div id="file-preview" class="file-preview"></div>
                    </div>
                    
                    <!-- Display Name -->
                    <div class="form-group">
                        <label for="document-display-name" class="form-label">Nome de Exibição *</label>
                        <input type="text" id="document-display-name" name="display_name" class="form-input" required>
                    </div>
                    
                    <!-- Visibility -->
                    <div class="form-group">
                        <label class="form-label">Visibilidade</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="document-visible-client" name="visible_to_client" checked>
                                <span class="checkbox-custom"></span>
                                Visível para o cliente
                            </label>
                        </div>
                    </div>
                    
                    <!-- Description -->
                    <div class="form-group full-width">
                        <label for="document-description" class="form-label">Descrição</label>
                        <textarea id="document-description" name="description" class="form-textarea" rows="3" placeholder="Descrição opcional do documento"></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancel-upload">Cancelar</button>
                    <button type="submit" class="btn-primary">
                        <i class="mdi mdi-upload"></i>
                        Enviar Documento
                    </button>
                </div>
                
                <div id="upload-spinner" class="upload-spinner" style="display: none;">
                    <div class="spinner"></div>
                    <p>Enviando documento...</p>
                </div>
            </form>
        </div>
    </div>
</div>
