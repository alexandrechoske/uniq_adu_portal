{% extends "base.html" %}

{% block title %}Dashboard Importações Resumido - Portal UniSystem{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('dash_importacoes_resumido.static', filename='dash_importacoes_resumido/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-resumido-container">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Carregando dados...</p>
        </div>
    </div>

    <!-- Actions Bar with Breadcrumb -->
    <div class="actions-bar">
        <div class="actions-left">
            {{ breadcrumb([
                {'name': 'Menu', 'icon': 'mdi mdi-menu', 'url': url_for('menu.menu_home')},
                {'name': 'Dashboards', 'icon': 'mdi mdi-view-dashboard', 'url': url_for('menu.dashboards')},
                {'name': 'Dashboard Importações', 'icon': 'mdi mdi-ship'}
            ]) }}
        </div>
        <div class="actions-right">
            <button id="btn-toggle-auto-loop" class="btn btn-secondary">
                <i id="auto-loop-icon" class="mdi mdi-play-circle"></i>
                <span id="auto-loop-text">Parar Loop</span>
            </button>
            <button id="btn-refresh" class="btn btn-secondary">
                <i class="mdi mdi-refresh"></i>
                Atualizar
            </button>
            <div class="checkbox-container">
                <input type="checkbox" id="filtro-embarque" class="filter-checkbox">
                <label for="filtro-embarque">Apenas com Data de Embarque</label>
            </div>
        </div>
    </div>

    <!-- Header com Métricas -->
    <div class="header-section">
        <div class="header-left">
            <div class="metrics-section">
                <div class="total-info">
                    <span id="total-processos">TOTAL: 0 PROCESSOS</span>
                </div>
                <div class="modal-counts-container">
                    <div class="modal-count-item">
                        <img src="/static/medias/minimal_ship.png" alt="Marítimo" class="modal-count-icon">
                        <span id="count-maritimo">0</span>
                    </div>
                    <div class="modal-count-item">
                        <img src="/static/medias/minimal_plane.png" alt="Aéreo" class="modal-count-icon">
                        <span id="count-aereo">0</span>
                    </div>
                    <div class="modal-count-item">
                        <img src="/static/medias/minimal_truck.png" alt="Terrestre" class="modal-count-icon">
                        <span id="count-terrestre">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="header-center">
            <div class="company-logo">
                <!-- Logo do cliente será exibida aqui dinamicamente -->
                <img id="client-logo" src="{{ url_for('static', filename='medias/Logo_Unique.png') }}" alt="Logo Cliente" class="logo-img">
                <span id="client-name" class="company-name">CLIENTE</span>
            </div>
        </div>
        
        <div class="header-right">
            <div class="time-info">
                <!-- Cotações movidas para o topo -->
                <div class="exchange-rates-top">
                    <div class="currency-item-small">
                        <span class="currency-symbol-small">$</span>
                        <span id="dolar-rate-top" class="currency-value-small">-.----</span>
                    </div>
                    <div class="currency-item-small">
                        <span class="currency-symbol-small">€</span>
                        <span id="euro-rate-top" class="currency-value-small">-.----</span>
                    </div>
                </div>
                <div class="current-time" id="current-time">--:--</div>
                <div class="current-date" id="current-date">-- ------</div>
            </div>
        </div>
    </div>

    <!-- Tabela de Dados -->
    <div class="table-container">
        <table class="custom-table" id="data-table">
            <thead>
                <tr>
                    <th>MODAL</th>
                    <th>NUM</th>
                    <th>NÚMERO DI</th>
                    <th>REF UNIQUE</th>
                    <th>REF IMPORTADOR</th>
                    <th>DATA EMBARQUE</th>
                    <th>DATA CHEGADA</th>
                    <th>DATA REGISTRO</th>
                    <th>CANAL</th>
                    <th>DATA ENTREGA</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <!-- Dados serão inseridos via JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Paginação -->
    <div class="pagination-container">
        <button id="btn-prev-page" class="btn btn-secondary" disabled>
            <i class="mdi mdi-chevron-left"></i>
            Anterior
        </button>
        <div class="page-info-container">
            <span id="page-info" class="page-info">Página 1 de 1</span>
            <div id="auto-loop-indicator" class="auto-loop-indicator">
                <i class="mdi mdi-autorenew"></i>
                <span>Loop Automático</span>
            </div>
        </div>
        <button id="btn-next-page" class="btn btn-secondary" disabled>
            Próxima
            <i class="mdi mdi-chevron-right"></i>
        </button>
    </div>

    <!-- Rodapé -->
    <div class="footer-section">
        <div class="footer-center">
            <div class="copyright">
                <span>Copyright © 2024 Todos os direitos reservados.</span>
                <img src="{{ url_for('static', filename='medias/Logo_Unique.png') }}" alt="Unique" class="footer-logo">
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('dash_importacoes_resumido.static', filename='dash_importacoes_resumido/dashboard.js') }}"></script>
{% endblock %}
