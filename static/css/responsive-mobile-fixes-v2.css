/* ================================================
   RESPONSIVE MOBILE FIXES - GLOBAL
   CORREÇÃO AGRESSIVA: Nada ultrapassa a largura do viewport
   ================================================ */

/* ===== FORÇA WIDTH 100% E NÃO ULTRAPASSA ===== */

@media (max-width: 768px) {
    /* Box-sizing em TUDO */
    * {
        box-sizing: border-box !important;
    }
    
    html, body {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Containers principais - NUNCA ULTRAPASSAM */
    .container,
    .container-fluid,
    .dashboard-container,
    .page-container,
    .main-content,
    .content-wrapper,
    [class*="container"] {
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        box-sizing: border-box !important;
    }
    
    /* Filhos de containers respeitam tamanho */
    .container > *,
    .container-fluid > * {
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
}

/* ===== FILTROS EM MOBILE ===== */

@media (max-width: 480px) {
    .filter-row,
    .filters-container,
    .filter-controls,
    .actions-bar,
    .search-bar,
    .filter-section {
        display: flex !important;
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 0.75rem !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
    }
    
    .filter-group,
    .filter-item,
    .input-group,
    .form-group,
    .btn-group {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        flex: 1 !important;
        overflow: hidden !important;
    }
    
    .filter-select,
    .form-control,
    .form-input,
    select,
    input,
    textarea {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        font-size: 16px !important;
        padding: 0.75rem !important;
        box-sizing: border-box !important;
    }
    
    .btn,
    button,
    .btn-primary,
    .btn-secondary,
    .filter-actions .btn,
    .actions-right .btn {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0.75rem !important;
        box-sizing: border-box !important;
    }
    
    .filter-date-inputs {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
        width: 100% !important;
    }
}

@media (max-width: 768px) and (min-width: 481px) {
    .filter-row,
    .filters-container {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 0.75rem !important;
        width: 100% !important;
    }
    
    .filter-group {
        flex: 1 1 calc(50% - 0.375rem) !important;
        min-width: 150px !important;
        max-width: calc(50% - 0.375rem) !important;
    }
}

/* ===== GRIDS E CONTAINERS EM MOBILE ===== */

@media (max-width: 768px) {
    .kpi-grid,
    .kpi-grid-executive,
    .charts-grid,
    .charts-row,
    .dashboard-line-1,
    .dashboard-line-2,
    .stats-grid,
    .chart-section-duo {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
    }
    
    .perfis-grid {
        grid-template-columns: 1fr !important;
    }
    
    .modal-counts-container,
    .actions-right {
        flex-direction: column !important;
        gap: 0.75rem !important;
        width: 100% !important;
    }
    
    .row {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
    }
    
    [class*="col-"] {
        padding-left: 0 !important;
        padding-right: 0 !important;
        max-width: 100% !important;
    }
}

/* ===== TABELAS NÃO ULTRAPASSAM ===== */

@media (max-width: 768px) {
    .table-container,
    .table-responsive,
    .table-wrapper {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        margin: 0 !important;
        padding: 0 !important;
        box-sizing: border-box !important;
    }
    
    table,
    .custom-table,
    .data-table {
        width: 100% !important;
        border-collapse: collapse !important;
        font-size: 0.8rem !important;
    }
    
    table td,
    table th {
        padding: 6px 4px !important;
        white-space: nowrap !important;
    }
}

/* ===== CARDS E COMPONENTES ===== */

@media (max-width: 768px) {
    .card,
    .chart-container,
    .section,
    .chart-section {
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
    }
    
    .chart-header,
    .card-header,
    .section-header {
        flex-direction: column !important;
        gap: 1rem !important;
        width: 100% !important;
    }
    
    .kpi-card,
    .kpi-card-compact {
        flex-direction: column !important;
        width: 100% !important;
        padding: 1rem !important;
    }
}

/* ===== MODAIS RESPONSIVOS ===== */

@media (max-width: 768px) {
    .modal-content,
    .modal-dialog,
    .filter-modal-content {
        width: 100% !important;
        max-width: 100% !important;
        margin: auto !important;
        box-sizing: border-box !important;
    }
    
    .modal-body {
        padding: 1rem !important;
    }
}

/* ===== TIPOGRAFIA EM MOBILE ===== */

@media (max-width: 480px) {
    h1 { font-size: 1.5rem !important; }
    h2 { font-size: 1.25rem !important; }
    h3 { font-size: 1.1rem !important; }
    h4, .section-title { font-size: 1rem !important; }
    h5 { font-size: 0.95rem !important; }
    h6 { font-size: 0.9rem !important; }
    small, .text-small { font-size: 0.75rem !important; }
}

/* ===== PADDING/MARGIN EM MOBILE ===== */

@media (max-width: 768px) {
    .dashboard-container,
    .container,
    .container-fluid {
        padding: 0.75rem !important;
    }
    
    .card {
        margin: 0 !important;
        padding: 1rem !important;
    }
    
    .mb-2, .mb-3 { margin-bottom: 0.75rem !important; }
    .mt-2, .mt-3 { margin-top: 0.75rem !important; }
    .ml-2, .ml-3 { margin-left: 0.75rem !important; }
    .mr-2, .mr-3 { margin-right: 0.75rem !important; }
}

/* ===== HIDE EM MOBILE ===== */

@media (max-width: 768px) {
    .hide-tablet-down { display: none !important; }
}

@media (max-width: 480px) {
    .hide-mobile { display: none !important; }
}

/* ===== UTILITÁRIOS FINAIS ===== */

@media (max-width: 768px) {
    /* Previne overflow em qualquer elemento */
    body * {
        max-width: 100% !important;
    }
    
    /* Força hidden em overflow */
    .dashboard-container,
    .main-content {
        overflow: hidden !important;
    }
}
